<% if @simplifeed.empty? %>
	<div class="row-fluid">
		<div class="span12 hero-unit">
			<h2>Welcome to Simplifeed.</h2>
			<h3>To get started, add some friends.</h3>
			<%= form_tag(:action => 'request_friendship') %>
				<input name="friend_username" type="text" placeholder="Enter username to search." class="" style="margin: 0 auto;" autocomplete="off" data-provide="typeahead" data-items="8" data-source='<%= @users.to_json %>'>
				<input type="submit" value="Send Friend Request" class="btn btn-primary" />
			</form>
		</div>
	</div>
<% end %>

<a class="btn btn-info" data-toggle="modal" href="#add-provider">
	<i class="icon-user icon-white"></i> Connect Account
</a>

<a class="btn btn-inverse pull-right" data-toggle="modal" href="#post">
	<i class="icon-plus icon-white"></i> Add Post
</a>

<div id="add-provider" class="modal hide fade">
	<div class="modal-header">
		<button class="close" data-dismiss="modal">×</button>
		<h3>Connect account to Simplifeed</h3>
	</div>
	<div class="modal-body">
		  <ul id="login">
		    <% @providers.each do |provider| %>
		      <% if ! @authorized_providers.include?(provider) %>
		        <li><a href="/auth/<%=provider%>" class="<%=provider%>"></a></li>
		      <% end %>
		    <% end %>
		  </ul>
	</div>
</div>

<div id="post" class="modal hide fade">
	<div class="modal-header">
		<button class="close" data-dismiss="modal">×</button>
		<h3>Add Post</h3>
	</div>
	<%= form_tag(:action => 'post') %>
	    <div class="modal-body">
	    	<%= text_area_tag :body %>		      
			<ul id="post-providers">
		        <% @providers.each do |provider| %>
		          <% if @authorized_providers.include?(provider) %>
			          <li>
			           <%= check_box_tag 'providers[]', provider, true, :id => "post_to_#{provider}" %>
			            <img src="/images/buttons/<%=provider%>_16.png" />
			          </li>
		          <% end %>
		        <% end %>
		    </ul>
		 </div>
		 <div class="modal-footer">
		 	<input type="submit" value="Post" class="btn btn-primary" />
		 </div>
	</form>
</div>

<div id="edit-post" class="modal hide fade">
	<div class="modal-header">
		<button class="close" data-dismiss="modal">×</button>
		<h3>Edit Post</h3>
	</div>
	<%= form_tag(:action => 'update_post') %>
		<input type="hidden" value="" id="post_id" name="post_id" />
	    <div class="modal-body">
	    	<%= text_area_tag :body %>
		 </div>
		 <div class="modal-footer">
		 	<input type="submit" value="Update" class="btn btn-primary" />
		 </div>
	</form>
</div>

<div id="confirm-delete" class="modal hide fade">
	<div class="modal-header">
		<button class="close" data-dismiss="modal">×</button>
		<h3>Delete Post?</h3>
	</div>
	<div class="modal-body">
		<p>Are you sure you want to delete this post?</p>
	</div>
	<div class="modal-footer">
		<form id="confirm-delete-form" action="" class="button_to" method="post">
		  <input name="_method" type="hidden" value="delete">
		  <button class="btn" onclick="$('#confirm-delete').modal('hide');">Cancel</button>
		  <button class="btn btn-danger destroy" type="submit"><i class="icon-remove icon-white"></i> Delete</button>
		  <input name="authenticity_token" type="hidden" value="<%= form_authenticity_token %>">
	    </form>
	</div>
</div>

<div id="simplifeed" class="row-fluid">
	  <div id="feeds" class="span12">
		  <% @simplifeed.sort {|a, b| a[:created_at] <=> b[:created_at]}.reverse.each do |post| %>
		  	
		  	<%= render "shared/post", :post => post %>
		  	
		  <% end %>
	  </div>
</div>